<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://rse.shef.ac.uk/blog/">
<meta name="description" content="RSE at Sheffield">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RSE at Sheffield</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://rse.shef.ac.uk/blog/">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://rse.shef.ac.uk/">

                <span id="blog-title">RSE at Sheffield</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../activities">What we do</a>
                </li>
<li>
<a href="../training">Training</a>
                </li>
<li>
<a href="../blog">Blog</a>
                </li>
<li>
<a href="../community">Community</a>
                </li>
<li>
<a href="../resources">Resources</a>
                </li>
<li>
<a href="../forged">Forged in Sheffield</a>
                </li>
<li>
<a href="../testimonials">Testimonials</a>
                </li>
<li>
<a href="../contact">Contact Us</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="mozhgankch_intro/" class="u-url">A new member of the team: Mozhgan Kabiri Chimeh</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/mozhgan-kabiri-chimeh/">Mozhgan Kabiri Chimeh</a>
            </span></p>
            <p class="dateline"><a href="mozhgankch_intro/" rel="bookmark"><time class="published dt-published" datetime="2016-10-28T08:09:22Z" title="2016-10-28 08:09">2016-10-28 08:09</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>My name is <strong>Mozhgan Kabiri Chimeh</strong> and I am a <a href="http://www.rse.ac.uk/">Research Associate/Research Software Engineer</a> who specialises in performance acceleration targeting Many-core and Multi-core architectures. Research is my passion and I have carefully developed my education with research and teaching in mind. I completed my PhD in computer science in 2016 at the University of Glasgow where my area of research was accelerating logic gate circuit simulation targeting heterogeneous architectures.  As part of my PhD project, I optimised and accelerated simulation algorithms and applied them to various parallel architectures (SIMD enabled machines, clusters, and GPUs). I have practical experience with parallel programming using High Performance Computing languages and models including OpenMP and CUDA.</p>
<p>I am glad to be a part of RSE team as well as working as a researcher in Computer Graphic and simulation modelling group here at the University of Sheffield. Feel free to get in touch with me via my email address (m.kabiri-chimeh@sheffield.ac.uk) or my <a href="https://uk.linkedin.com/in/mozhgankch">LinkedIn</a>.</p>
<p>When not working I divide my time between family, movie, artwork and macro-photography!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="julia-manchester-2016/" class="u-url">Manchester Julia Workshop</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/avgoustinos-vouros/">Avgoustinos Vouros</a>
            </span></p>
            <p class="dateline"><a href="julia-manchester-2016/" rel="bookmark"><time class="published dt-published" datetime="2016-10-19T11:46:11Z" title="2016-10-19 11:46">2016-10-19 11:46</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>A few weeks ago (19-20th September 2016) I had the chance to attend the very first Julia workshop in the UK held at the University of Manchester by the <a href="http://www.maths.manchester.ac.uk/~siam/">SIAM Student Chapter</a>. The first day of the <a href="http://www.maths.manchester.ac.uk/~siam/julia16/">workshop</a> consisted of a basic tutorial of Julia, installation instructions and around five hours of hackathon. The second day provided an introduction to carrying out research in various fields such as data analysis, material science, natural language processing and bioinformatics using Julia. The attendees were a mixture of PhD students, post-docs and lecturers mainly from the University of Manchester as well as other universities and institutes (Warwick, Glasgow, Reading, MIT, Imperial College London, Earlham Institute).</p>
<h2>Day 1: Tutorial and Hackathon</h2>
<p>There are several ways to <a href="http://julialang.org/downloads/">run Julia</a> in any OS, including command line version, <a href="http://junolab.org/">Juno</a> IDE and Jupyter notebook (<a href="https://github.com/JuliaLang/IJulia.jl">IJulia</a>). In case you want to avoid any installation process then there is also the  browser based <a href="https://www.juliabox.com/">JuliaBox.com</a>. I was surprised that the whole process was smooth without any software setup issues!</p>
<p>The tutorial consisted of some very basic demonstration of Julia mostly on linear algebra and statistics and after a short break we were left to explore Julia, collaborate and exchange ideas. There were also two Exercises proposed to us:</p>
<ul>
<li>
<a href="https://www.kaggle.com/c/street-view-getting-started-with-julia">First Steps With Julia</a> by <a href="https://www.kaggle.com/">kaggle</a> which teaches some basics of image processing and machine learning to identify the character from pictures.</li>
<li>
<a href="https://docs.google.com/document/d/1NYQFLeORdMCHl2hncOkhNNPNJUWGAoGcR_tCs-KF-D0/edit#heading=h.262rsr2l8kb4">Bio.jl Exercises</a> by Ben J. Ward which provides simple examples of using the <a href="https://github.com/BioJulia/Bio.jl">Bio.jl</a> to do simple operations and manipulations of biological sequences.</li>
</ul>
<p>As I wanted to try as many libraries as possible from image processing and data visualization to embedded Java, I ended up using a lot of different packages so I found these commands (self-explanatory) for package managing the most useful for me:<code>Pkg.add("PackageName")</code>, <code>Pkg.status()</code>, <code>Pkg.update()</code>. Here of course, I detected some compatibility issues. I was running Julia version 0.4.6 but it appears that most of the attendees were using the version 0.4.5. Some commands seemed to have changed between these versions; for example in the kaggle's exercise the command <code>float32sc(img)</code> which converts an image to float values was not working for me instead I had to use the <code>float32(img)</code> command. A minor issue for a new-born language.</p>
<h2>Day 2: Talks</h2>
<p>The talks were centred around specific fields with heavy scientific computing (automatic differentiation, molecular modelling, natural language processing, bioinformatics and computational biology) and how Julia influence these fields. Each speaker presented his field of research and his Julia implementations which ended up as another package for the Julia community. More information about the speakers can be found on the <a href="http://www.maths.manchester.ac.uk/~siam/julia16/">Manchester Julia Workshop webpage</a> and a list of the presented packages can be found below:</p>
<ul>
<li>Data analysis and visualization: <a href="http://distributionsjl.readthedocs.io/en/latest/">Distributions.jl</a>, <a href="https://github.com/JuliaStats/DataFrames.jl">DataFrames.jl</a>, <a href="https://github.com/JuliaStats/GLM.jl">GLM.jl</a>
</li>
<li>Embed other languages with Julia (Python, R): <a href="https://github.com/JuliaPy/PyCall.jl">PyCall.jl</a>, <a href="https://github.com/JuliaStats/RCall.jl">RCall.jl</a>.</li>
<li>Automatic differentiation: <a href="https://github.com/JuliaDiff/ForwardDiff.jl">ForwardDiff.jl</a>.</li>
<li>Molecular modelling: <a href="https://github.com/libAtoms/JuLIP.jl">JuLIP.jl</a>.</li>
<li>Bioinformatics and computational biology: <a href="https://github.com/BioJulia/Bio.jl">bio.jl</a>.</li>
</ul>
<h2>Final words</h2>
<p>Overall I was very satisfied with the Julia experience and I am waiting for its first official release (v1.0) which will probably be next year. Here are the main advantages which led me to believe that Julia can be the next on demand programming language for scientific computing:</p>
<ul>
<li>Combines the productivity of dynamic languages (Java, Python) and the performance of static languages (C, Fortran). In other words: very easy to write optimized code and run your program fast at the same time. <a href="https://jiahao.github.io/">Dr Jiahao Chen</a> from MIT in his <a href="http://www.slideshare.net/acidflask/programming-languages-history-relativity-and-design">talk</a> mentioned the following referring to Julia's speed, "<em>You can define many methods for a generic function. If the compiler can figure out exactly which method you need to use when you invoke a function, then it generates optimized code</em>".</li>
<li>Deals with the two language problem: base library and functionality is written in Julia itself.</li>
<li>It is free and open source (MIT licensed), high advantageous for the scientific community to share code or expand existing one.</li>
<li>A great and friendly community and users from various fields which constantly expand the existing Julia library.</li>
</ul>
<p><strong>Fun fact:</strong> The system for variable declaration accepts any <a href="http://docs.julialang.org/en/release-0.5/manual/unicode-input/">Unicode character</a>: <code>\delta[tab] = 2</code> results in <code>δ = 2</code>, <code>\:smiley: = 4</code> results in <code>😃 = 4.</code> Although, apart from some April Fool's pranks, Julia's <a href="http://docs.julialang.org/en/release-0.5/manual/variables/">stylistic conventions</a> is advised to be followed when defining variable names!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="coffee-and-cakes-event/" class="u-url">Coffee and Cakes Event</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/paul-richmond/">Paul Richmond</a>
            </span></p>
            <p class="dateline"><a href="coffee-and-cakes-event/" rel="bookmark"><time class="published dt-published" datetime="2016-09-26T15:42:42+01:00" title="2016-09-26 15:42">2016-09-26 15:42</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>RSE Sheffield is hosting its first coffee and cakes event on <strong>4th October 2016 at 10:00 in the Ada Lovelace</strong> room on 1st floor of the Computer Science Department (Regents Court East). Attendance is free and you don't need to register (or bring coffee and cake with you). Simply call in and take the opportunity to come and have an informal chat about research software.</p>
<p>The event is a community event for anyone not just computer science or members of the RSE team. If you work on software development are an RSE or simply want to talk about some aspect of software or software in teaching then come along.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="intel-R-iceberg/" class="u-url">Accelerated versions of R for Iceberg</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/mike-croucher/">Mike Croucher</a>
            </span></p>
            <p class="dateline"><a href="intel-R-iceberg/" rel="bookmark"><time class="published dt-published" datetime="2016-09-12T00:31:35Z" title="2016-09-12 00:31">2016-09-12 00:31</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><strong>To Long; Didn't Read -- Summary</strong></p>
<p>I've built a version of R on Iceberg that is faster than the standard version for various operations. Documentation is at <a href="http://docs.iceberg.shef.ac.uk/en/latest/software/apps/intel_r.html">http://docs.iceberg.shef.ac.uk/en/latest/software/apps/intel_r.html</a>.</p>
<p>If it works more quickly for you, or if you have problems, please let us know by emailing <a href="mailto:rse@sheffield.ac.uk">rse@sheffield.ac.uk</a></p>
<p><strong>Background</strong></p>
<p>I took over building <a href="http://docs.iceberg.shef.ac.uk/en/latest/software/apps/r.html">R for Iceberg</a>, Sheffield's High Performance Computing System, around a year ago and have been incrementally improving both the install and the documentation with every release. Something that's been bothering me for a while is the lack of optimisation. The standard Iceberg build uses an ancient version of the gcc compiler and (probably) unoptimised versions of <a href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms">BLAS</a> and <a href="https://en.wikipedia.org/wiki/LAPACK">LAPCK</a>.</p>
<p>BLAS and LAPACK are extremely important libraries -- they provide the code that programs such as R use for linear algebra: Matrix-Matrix multiplication, Cholesky decomposition, principle component analysis and so on. It's important to note that there are lots of implementations of BLAS and LAPACK: <a href="http://math-atlas.sourceforge.net/">ATLAS</a>, <a href="http://www.openblas.net/">OpenBLAS</a> and the <a href="https://software.intel.com/en-us/intel-mkl">Intel MKL</a> are three well-known examples. Written in Fortran, the interfaces of all of these versions are identical, which means you can use them interchangeably, but the speed of the implementation can vary considerably.</p>
<p>The BLAS and LAPACK implementations on Iceberg are undocumented (before my time!) which means that we have no idea what we are dealing with. Perhaps they are optimised, perhaps not. I suspected 'not'.</p>
<p><strong>Building R with the Intel Compiler and MKL</strong></p>
<p>The Intel Compiler Suite often produces the fastest executables of all available compilers for any given piece of Fortran or C/C++ code. Additionally, the Intel MKL is probably the fastest implementation of BLAS and LAPACK available for Intel Hardware. As such, I've had <strong>Build R using Intel Compilers and MKL</strong> on my to-do list for some time.</p>
<p>Following a recent visit to the University of Lancaster, where they've been doing this for a while, I finally bit the bullet and produced some build-scripts. Thanks to Lancaster's Mike Pacey for help with this!  There are two versions (links point to the exact commits that produced the builds used in this article):</p>
<ul>
<li>
<a href="https://github.com/mikecroucher/HPC_Installers/blob/ea4a9f33b705a8cae01841d9c173278fcb486061/apps/R/3.3.1/sheffield/iceberg/intel_15/install_intel_r_sequential.sh">install_intel_r_sequential.sh</a> - Linked to the sequential (i.e. single-core) version of Intel MKL.</li>
<li>
<a href="https://github.com/mikecroucher/HPC_Installers/blob/ea4a9f33b705a8cae01841d9c173278fcb486061/apps/R/3.3.1/sheffield/iceberg/intel_15/install_intel_r_parallel.sh">install_intel_r_parallel.sh</a> - Linked to the parallel version of Intel MKL.</li>
</ul>
<p>The benchmark code is available in the Sheffield HPC examples repo <a href="https://github.com/mikecroucher/HPC_Examples/">https://github.com/mikecroucher/HPC_Examples/</a>. The exact commit that produced these results is <a href="https://github.com/mikecroucher/HPC_Examples/blob/35de11e7c47bc278b15a64fb77c5575b074e1a47/languages/R/linear_algebra/linear_algebra_bench.r">35de11e</a></p>
<p><strong>Testing</strong></p>
<p>It's no good having fast builds of R if they give the wrong results! To make sure that everything is OK, I ran R's installation test suite and everything passed. If you have an account on iceberg, you can see the output from the test suite at <code>/usr/local/packages6/apps/intel/15/R/sequential-3.3.1/install_logs/make_install_tests-R-3.3.1.log</code>.</p>
<p>It's important to note that although the tests passed, there <strong>are</strong> differences in output between this build and the reference build that R's test suite is based on. This is due to a number of factors such as the fact that <a href="http://www.walkingrandomly.com/?p=5380">Floating point addition is not associative</a> and that the signs of eigenvectors are arbitrary and so on.</p>
<p>A discussion around these differences and how they relate to R can be found <a href="http://r.789695.n4.nabble.com/quot-make-check-quot-fails-on-lapack-R-and-stats-Ex-R-td4698672.html">on nabble</a>.</p>
<p><strong>How fast is it?</strong></p>
<p>So is it worth it? I ran a benchmark called <a href="https://github.com/mikecroucher/HPC_Examples/blob/35de11e7c47bc278b15a64fb77c5575b074e1a47/languages/R/linear_algebra/linear_algebra_bench.r#L19">linear_algebra_bench.r</a> that implemented 5 tests</p>
<ul>
<li>MatMul - Multiplies two random 1000 x 5000 matrices together</li>
<li>Chol - Cholesky decomposition of a 5000 x 5000 random matrix</li>
<li>SVD - Singular Value Decompisition of a 10000 x 2000 random matrix</li>
<li>PCA - Principle component analysis of a 10000 x 2000 random matrix</li>
<li>LDA - A Linear Discriminant Analysis problem</li>
</ul>
<p>Run time of these operations compared to Iceberg's standard install of R is shown in the table below.</p>
<ul>
<li>Iceberg submission scripts for these can be found in the <a href="https://github.com/mikecroucher/HPC_Examples">HPC Examples repo</a>
</li>
</ul>
<p><strong>Execution time in seconds (Mean of 5 independent runs) </strong></p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-yw4l{vertical-align:top}
</style>
<table class="tg">
<tr>
<th class="tg-yw4l"></th>
    <th class="tg-yw4l">MatMul</th>
    <th class="tg-yw4l">Chol</th>
    <th class="tg-yw4l">SVD</th>
    <th class="tg-yw4l">PCA</th>
    <th class="tg-yw4l">LDA</th>
  </tr>
<tr>
<td class="tg-yw4l">Standard R</td>
    <td class="tg-yw4l">134.70</td>
    <td class="tg-yw4l">20.95</td>
    <td class="tg-yw4l">46.56</td>
    <td class="tg-yw4l">179.60</td>
    <td class="tg-yw4l">132.40</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with sequential MKL</td>
    <td class="tg-yw4l">12.19</td>
    <td class="tg-yw4l">2.24</td>
    <td class="tg-yw4l">9.13</td>
    <td class="tg-yw4l">24.58</td>
    <td class="tg-yw4l">31.32</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (2 cores)</td>
    <td class="tg-yw4l">7.21</td>
    <td class="tg-yw4l">1.60</td>
    <td class="tg-yw4l">5.43</td>
    <td class="tg-yw4l">14.66</td>
    <td class="tg-yw4l">23.54</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (4 cores)</td>
    <td class="tg-yw4l">3.24</td>
    <td class="tg-yw4l">1.17</td>
    <td class="tg-yw4l">3.34</td>
    <td class="tg-yw4l">7.87</td>
    <td class="tg-yw4l">20.63</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (8 cores)</td>
    <td class="tg-yw4l">1.71</td>
    <td class="tg-yw4l">0.38</td>
    <td class="tg-yw4l">1.99</td>
    <td class="tg-yw4l">5.33</td>
    <td class="tg-yw4l">15.82</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (16 cores)</td>
    <td class="tg-yw4l">0.96</td>
    <td class="tg-yw4l">0.28</td>
    <td class="tg-yw4l">1.60</td>
    <td class="tg-yw4l">4.05</td>
    <td class="tg-yw4l">13.65</td>
  </tr>
</table>
<p><img alt="" src="../images/matmul_r_intel.png"></p>
<p>Another way of viewing these results is to see the speed up compared to the standard install of R. <strong>Even on a single CPU core, the Intel builds are between 4 and 11 times faster than the standard builds</strong>.  Making use of 16 cores takes this up to <strong>141 times faster in the case of Matrix-Matrix Multiplication</strong>!</p>
<p><strong>Speed up compared to standard R</strong></p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-yw4l{vertical-align:top}
</style>
<table class="tg">
<tr>
<th class="tg-yw4l"> </th>
    <th class="tg-yw4l">MatMul</th>
    <th class="tg-yw4l">Chol</th>
    <th class="tg-yw4l">SVD</th>
    <th class="tg-yw4l">PCA</th>
    <th class="tg-yw4l">LDA</th>
  </tr>
<tr>
<td class="tg-yw4l">Standard R</td>
    <td class="tg-yw4l">1</td>
    <td class="tg-yw4l">1</td>
    <td class="tg-yw4l">1</td>
    <td class="tg-yw4l">1</td>
    <td class="tg-yw4l">1</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with sequential MKL</td>
    <td class="tg-yw4l">11</td>
    <td class="tg-yw4l">9</td>
    <td class="tg-yw4l">5</td>
    <td class="tg-yw4l">7</td>
    <td class="tg-yw4l">4</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (2 cores)</td>
    <td class="tg-yw4l">19</td>
    <td class="tg-yw4l">13</td>
    <td class="tg-yw4l">9</td>
    <td class="tg-yw4l">12</td>
    <td class="tg-yw4l">6</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (4 cores)</td>
    <td class="tg-yw4l">42</td>
    <td class="tg-yw4l">18</td>
    <td class="tg-yw4l">14</td>
    <td class="tg-yw4l">23</td>
    <td class="tg-yw4l">6</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (8 cores)</td>
    <td class="tg-yw4l">79</td>
    <td class="tg-yw4l">55</td>
    <td class="tg-yw4l">23</td>
    <td class="tg-yw4l">34</td>
    <td class="tg-yw4l">8</td>
  </tr>
<tr>
<td class="tg-yw4l">Intel R with parallel MKL (16 cores)</td>
    <td class="tg-yw4l">141</td>
    <td class="tg-yw4l">75</td>
    <td class="tg-yw4l">29</td>
    <td class="tg-yw4l">44</td>
    <td class="tg-yw4l">10</td>
  </tr>
</table>
<p><strong>Parallel environment</strong></p>
<p>The type of parallelisation in use here is <a href="http://openmp.org/wp/">OpenMP</a>. As such, you need to use Iceberg's openmp environment.  That is, if you want 8 cores (say), add the following to your submission  script</p>
<pre>
#$ -pe openmp 8
export OMP_NUM_THREADS=8
</pre>

<p>Using OpenMP limits the number of cores you can use per job to the number available on a single node. At the time of writing, this is 16.</p>
<p><strong>How many cores: Finding the sweet spot</strong></p>
<p>Note that everything is fastest when using 16 cores! As such, it may be tempting to always use 16 cores for your jobs. This will almost always be a mistake.
It may be that the aspect of your code that's accelerated by this build doesn't account for much of the runtime of your problem. As such, those 16 cores will sit idle most of the time -- wasting resources.  </p>
<p>You'll also spend a lot longer waiting in the queue for 16 cores than you will for 2 cores which may swap any speed gains.</p>
<p>You should always perform scaling experiments before deciding how many cores to use for your jobs. Consider the Linear Discriminant Analysis problem, for example. Using just one core, Intel build gives us a 4 times speed-up compared to the standard build. Moving to 8 cores only makes it twice as fast again. As such, if you had lots of these jobs to do, your throughput would be higher running lots of single core jobs compared to lots of 8 core jobs.</p>
<p>If matrix-matrix multiply dominates your runtime, on the other hand, it may well be worth using 16 cores.</p>
<p><strong>Using this version of R for your own work</strong></p>
<p>As a user, there are a few things you need to be aware of with the Intel builds of R so I've created a separate documentation page for them.  This is currently at
<a href="http://docs.iceberg.shef.ac.uk/en/latest/software/apps/intel_r.html">http://docs.iceberg.shef.ac.uk/en/latest/software/apps/intel_r.html</a></p>
<p>My recommendation for using these builds is to work through the following procedure</p>
<ul>
<li>Ensure that your code runs with Iceberg's standard version of R and produce a test result.</li>
<li>In the first instance, switch to the sequential version of the Intel R build. In the best case, this will just require changing the module. You may also need to install some of your packages since the Intel build has a separate packages directory to the standard build.</li>
<li>If you see speed-up <strong>and</strong> the results are consistent with your test result, try the parallel version. Initially start with 2 cores and move upwards to find the sweet spot.</li>
</ul>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="the-university-of-sheffield-named-an-nvidia-gpu-education-center/" class="u-url">The University of Sheffield named an NVIDIA GPU Education Center</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/paul-richmond/">Paul Richmond</a>
            </span></p>
            <p class="dateline"><a href="the-university-of-sheffield-named-an-nvidia-gpu-education-center/" rel="bookmark"><time class="published dt-published" datetime="2016-07-02T17:50:04+01:00" title="2016-07-02 17:50">2016-07-02 17:50</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><img src="../images/NVIDIA_education.jpg" alt="Sheffield NVIDIA Education Centre" align="right" width="20%"></p>
<p>This week I am very pleased to announce that the University of Sheffield has been awarded the status of an NVIDIA CUDA Education Centre.</p>
<p>The faculty of Engineering has featured this in its latest <a href="http://www.sheffield.ac.uk/faculty/engineering/news/nvidia-1.587003">faculty newsletter</a> and the Department of Computer Science has published more details in a <a href="http://www.sheffield.ac.uk/dcs/latest-news/nvidia-1.587214">news feature</a>.</p>
<h3>But what does this mean to the RSE community at Sheffield and beyond?</h3>
<p>The recognition of being an NVIDIA education centre is a reflection of the teaching that is provided by The University of Sheffield on the subject of GPU computing. In case you are unaware of what teaching there is, I have a 4th year and Masters teaching module <a href="http://paulrichmond.shef.ac.uk/teaching/COM4521/">COM4521/COM6521</a> which ran for the first time in the 2015/2016 Spring Semester. This course will be run annually and is open to research staff as well as taught students. Last time there was roughly a 50:50 mix including senior research staff and PhD students. It is much more involved that the one or two day courses which typically give only an introduction to GPU programming. If you are a researcher looking to exploit GPU performance in your research then this course is an opportunity to learn some new skills.</p>
<p>In the future this course will be made freely available so even researchers outside of The University of Sheffield will be able to go through the notes and worked examples (lab sheets). </p>
<p>Some of the other benefits of being an NVIDIA Eduction (and also an NVIDIA Research) centre are;</p>
<ul>
<li>Access to NVIDIA GPU hardware and software (via Iceberg and in the Diamond labs) </li>
<li>Significant discount on Tesla hardware purchases</li>
<li>Access to NVIDIA parallel programming experts and resources</li>
<li>Access to educational webinars and an array of teaching materials</li>
<li>Free in the cloud GPU programming training at <a href="https://nvidia.qwiklab.com/">nvidia.qwiklab.com</a>
</li>
<li>Support in the form of letters of support (with contributions in kind) for research proposals with emphasis on GPU computing or deep learning</li>
<li>Joint promotion, public relations, and press activities with NVIDIA</li>
</ul>
<h3>Other Training Opportunities</h3>
<p>Through <a href="http://rse.shef.ac.uk/">RSE Sheffield</a> and <a href="http://gpucomputing.sites.sheffield.ac.uk">GPUComputing@Sheffield</a> shorter courses for GPU computing are also available. I will be announcing dates for 1-2 day CUDA courses shortly and am working with CICS in developing new Python CUDA material. </p>
<p>For those that missed the sign-up, we are also running a two day deep learning with GPUs course in July. The places for this were in high demand and filled up within a day. This course will be repeated in due time and material from the course will be made available off-line.</p>
<p>Other GPU announcements will be made on both this RSE blog and on the <a href="https://groups.google.com/a/sheffield.ac.uk/forum/#!forum/gpucomputing">GPUComputing@Sheffield mailing list</a>. Expect some exciting new hardware and software once the Iceberg upgrade is complete (shortly).</p>
<p>Paul</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="NAG_6_1/" class="u-url">NAG Fortran Compiler 6.1 released</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/mike-croucher/">Mike Croucher</a>
            </span></p>
            <p class="dateline"><a href="NAG_6_1/" rel="bookmark"><time class="published dt-published" datetime="2016-06-16T13:50:28Z" title="2016-06-16 13:50">2016-06-16 13:50</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>All members of the University are entitled to download and use the NAG Fortran Compiler under the terms of our site license.</p>
<p>Version 6.1 has just been released:</p>
<p><img alt="NAG Fortran Compiler Screenshot" src="../images/macFB2a.PNG"></p>
<ul>
<li>Details at <a href="http://www.nag.co.uk/nag-compiler">http://www.nag.co.uk/nag-compiler</a>
</li>
<li>Download at <a href="http://www.nag.co.uk/content/downloads-nag-fortran-compiler-versions">http://www.nag.co.uk/content/downloads-nag-fortran-compiler-versions</a>
</li>
<li>Obtain licenses from <strong>support@nag.co.uk</strong> - Ensure that you email them from your @Sheffield.ac.uk email address</li>
</ul>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="HPC-Maple-1/" class="u-url">High Performance Computing with Maple, Part 1</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/mike-croucher/">Mike Croucher</a>
            </span></p>
            <p class="dateline"><a href="HPC-Maple-1/" rel="bookmark"><time class="published dt-published" datetime="2016-05-26T12:40:19+01:00" title="2016-05-26 12:40">2016-05-26 12:40</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Many people who use <a href="http://www.maplesoft.com/">Maple</a> on Sheffield's High Performance Computing (HPC) cluster do so interactively. They connect to the system, start a graphical X-Windows session and use Maple in exactly the same way as they would use it on their laptop. Such usage does have some benefits: giving access to more CPU cores and memory than you'd get on even the most highly specified of laptops, for example.</p>
<p>Interactive usage on the HPC system also has problems. Thanks to <a href="https://en.wikipedia.org/wiki/Latency_(engineering)">network latency</a>, using a Graphical User Interface over an X-Windows connection can be a painful experience. Additionally, long calculations can tie up your computer for hours or days and if anything happens to the network connection during that time, you risk losing it all!</p>
<p>If you spend a long time waiting for your Maple calculations to run, it's probably time to think about moving to batch processing.</p>
<h3>Batch processing</h3>
<p>The idea behind batch processing is that you log in to the system, send your computation to a queue and then log out and get on with your life. The HPC system will process your computation when resources become available and email you when it's done. You can then log back in, transfer the results to your laptop and continue your analysis.</p>
<p>So, batch processing frees up your personal computer but it can also significantly increase your throughput. With batch processing, you can submit hundreds of computations to the queue simultaneously.  The system will automatically process as many of them as it can in parallel -- allowing you to make use of dozens of large computers at once.</p>
<p>Batch processing is powerful but it comes at a price and that price is complexity.</p>
<h3>Converting interactive worksheets to Maple language files</h3>
<p>You are probably used to interacting with Maple via richly formatted worksheets and documents. These have the file extension <strong>.mw</strong> or <strong>.maple</strong>. Unfortunately, it is not possible to run Maple worksheets in batch mode so it is necessary for us to convert them to <strong>maple language files</strong> instead.</p>
<p>A <a href="http://www.maplesoft.com/support/help/maple/view.aspx?path=Formats%2FMPL">Maple Language File</a> has the extension <strong>.mpl</strong> and is a pure text file. To convert a worksheet to a Maple Language File, open the worksheet and click on  <strong>File-&gt;Export As-&gt;Maple Input</strong></p>
<p><img alt="Convert to mpl" src="../images/convert_to_mpl.png"></p>
<h3>An example</h3>
<p>Here is an example <strong>.maple</strong> worksheet and the corresponding <strong>.mpl</strong> Maple Language File, created using the conversion process detailed above. We also have a <strong>Job submission script</strong> that will be explained later.</p>
<ul>
<li>
<a href="../maple/hpc1/series_example.maple">series_example.maple</a> - Original Maple worksheet</li>
<li>
<a href="../maple/hpc1/series_example.mpl">series_example.mpl</a> - Maple Language File</li>
<li>
<a href="../maple/hpc1/run_maple_job.sh">run_maple_job.sh</a> - Job submission script</li>
</ul>
<p>If you look at the <strong>.mpl</strong> file in a text editor, you will see that it contains plain text versions of all the Maple input commands that were present in the original worksheet.</p>
<pre class="code literal-block"><span></span>myseries := series(sin(x), x = 0, 10);
poly := convert(myseries, polynom);
plot(poly, x = -2*Pi .. 2*Pi, y = -3 .. 3);
</pre>


<p>This is the file that we can run on the HPC system in batch mode.</p>
<p>The <strong>job submission script</strong> is a set of instructions to the HPC system's scheduler. It tells the system how much memory you want to use, what program you want to run and so on.  Here is its contents</p>
<pre class="code literal-block"><span></span>!/bin/bash
# Request 4 gigabytes of real memory (mem)
# and 4 gigabytes of virtual memory (mem)
#$ -l mem=4G -l rmem=4G

#Make Maple 2015 available
module load apps/binapps/maple/2015

#Run Maple with the input file, **series_example.mpl**
maple &lt; series_example.mpl
</pre>


<p>To run the example on the system:</p>
<ul>
<li>Transfer <strong>series_example.mpl</strong> and <strong>run_maple_job.sh</strong> to a directory on the HPC system. They both need to be in the same directory.</li>
<li>Log in to the system using a command line terminal and <strong>cd</strong> to the directory containing the files.</li>
<li>Use the <strong>ls</strong> command to confirm you really are in the right directory. You should see something like this:</li>
</ul>
<pre class="code literal-block"><span></span>[ab1test@testnode02 maple_example]$ ls

run_maple_job.sh  series_example.maple  series_example.mpl
</pre>


<ul>
<li>Submit the job to the queue with the <strong>qsub</strong> command</li>
</ul>
<pre class="code literal-block"><span></span>qsub run_maple_job.sh
</pre>


<ul>
<li>You should see something like</li>
</ul>
<pre class="code literal-block"><span></span>[ab1test@testnode02 maple_example]$ qsub run_maple_job.sh

Your job 1734126 ("run_maple_job.sh") has been submitted
</pre>


<p>The job number will differ from the one above. It is automatically allocated by the system and uniquely identifies the job.</p>
<ul>
<li>
<p>At this point, you could log off the system and do something else if you wished but, since this is such a short job, it won't be long before the results appear. A few seconds to a minute under normal conditions.</p>
</li>
<li>
<p>Run the <strong>ls</strong> command again to see the results files.</p>
</li>
</ul>
<pre class="code literal-block"><span></span>[fe1mpc@testnode02 maple_example]$ ls

run_maple_job.sh  run_maple_job.sh.e1734126  run_maple_job.sh.o1734126  series_example.maple  series_example.mpl
</pre>


<p>There are two new files:</p>
<ul>
<li>run_maple_job.sh.e1734126 - contains any error messages. Hopefully empty here</li>
<li>run_maple_job.sh.o1734126 - Contains the results of your job</li>
</ul>
<p>The numbers at the end refer to the job number.</p>
<p>This completes your first batch submission using Maple.</p>
<h3>Issues with graphs in Maple batch mode</h3>
<p>The Maple worksheet we used in this example includes a plot command. This looks great in a Maple worksheet but looks very retro when performed in batch mode!</p>
<pre class="code literal-block"><span></span>&gt; plot(poly, x = -2*Pi .. 2*Pi, y = -3 .. 3);

                                      3+                                 H     
                                       +                                 H     
                                       +                                HH     
                                      2+                                H      
                                       +                                H      
                                       +                               HH      
                                       +                               H       
                                      1+    HHHHHHHHHH                 H       
           HHHHHHHH                    +  HHH         HHH             H        
          HH      HHH                  +HHH             HH           HH        
  --+-+-+-*+-+--+-+-**-+-+--+-+-+--+-+-**-+-+--+-+-+--+-+-**-+-+--+-+*-+-+-+--
   -6    H     -4     HH   -2        H0*           2       HHH 4    HH     6   
         H             HHH         HHH +                     HHHHHHHH          
        H                 HHHHHHHHHH -1+                                       
        H                              +                                       
       HH                              +                                       
       H                               +                                       
       H                             -2+                                       
       H                               +                                       
      H                                +                                       
      H                              -3+                                       
</pre>


<p>You probably want to have something that looks a little nicer. The way to do this is to modify the Maple plot command so that it specifies an output file. For example, if we want to create a .gif file, our Maple Language File becomes</p>
<pre class="code literal-block"><span></span>myseries := series(sin(x), x = 0, 10);
poly := convert(myseries, polynom);

plotsetup(gif,plotoutput="plot.gif"):
plot(poly, x = -2*Pi .. 2*Pi, y = -3 .. 3);
</pre>


<p>The <strong>plotsetup</strong> command can output a number of file types.  See Maple's <a href="http://www.maplesoft.com/support/help/maple/view.aspx?path=plotsetup">plotsetup documentation</a> for details.</p>
<p>A full batch example for you to try is available below</p>
<ul>
<li>
<a href="../maple/hpc2/series_example_fixedplot.mpl">series_example_fixedplot.mpl</a> - Maple Language File</li>
<li>
<a href="../maple/hpc2/run_maple_job_2.sh">run_maple_job_2.sh</a> - Job submission script</li>
</ul>
<p>The results of transferring these files to the system and submitting with <strong>qsub run_maple_job_2.sh</strong> should include a file called <strong>plot.gif</strong> that looks like this</p>
<p><img alt="Maple plot" src="../maple/hpc2/plot.gif"></p>
<h3>Future articles</h3>
<p>In future articles, we'll be looking at how to make use of Maple's parallel computing constructs long with more advanced scheduling tricks that allow us to run 100s of jobs simultaneously. </p>
<h3>Further reading</h3>
<ul>
<li>
<a href="http://docs.iceberg.shef.ac.uk/en/latest/using-iceberg/sge.html">General introduction to batch processing</a> - From the Iceberg documentation</li>
<li>
<a href="http://docs.iceberg.shef.ac.uk/en/latest/software/scheduler/index.html">A list of scheduler commands</a> - <strong>qsub</strong> is just one example of a scheduler command. Here are a few more.</li>
</ul>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="fun-with-strace/" class="u-url">Fun with strace</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/david-jones/">David Jones</a>
            </span></p>
            <p class="dateline"><a href="fun-with-strace/" rel="bookmark"><time class="published dt-published" datetime="2016-05-23T10:26:51+01:00" title="2016-05-23 10:26">2016-05-23 10:26</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<h3>How I solved a mystery with strace and bash</h3>
<p>So I'm dabbling with <code>iceberg</code>, The University of Sheffield's HPC, and
I finally get round to putting my <a href="https://github.com/drj11/dot"><code>.profile</code></a> on there.
And I remember that I don't like
the way <code>less</code> clears the screen when I've finished reading a <code>man</code> page.</p>
<p>I need to set my <code>LESS</code> environment variable to <code>-X</code>.
So I <a href="https://github.com/drj11/dot/commit/7d097ba875e2cca186b8d659d3510c2af5c8df1b">add that to my <code>.profile</code></a>.
I do <code>exec bash -l</code> to emulate logging back in.</p>
<p>Doesn't work.
Still clears screen when reading man pages.
Turns out <code>LESS</code> isn't set.
What is going wrong with my <code>.profile</code>?</p>
<p>I'm becoming a fan of <code>strace</code> for this sort of debugging.</p>
<p>Have a look at this. When I run this command:</p>
<pre class="code literal-block"><span></span>strace -e signal= -e open bash -l -c 'echo SCRIPT GOT HERE'
</pre>


<p>I get this output (long and boring, skip and come back to the
bits I refer to):</p>
<pre class="code literal-block"><span></span>open("/etc/ld.so.cache", O_RDONLY)      = 3
open("/lib64/libtinfo.so.5", O_RDONLY)  = 3
open("/lib64/libdl.so.2", O_RDONLY)     = 3
open("/lib64/libc.so.6", O_RDONLY)      = 3
open("/dev/tty", O_RDWR|O_NONBLOCK)     = 3
open("/usr/lib/locale/locale-archive", O_RDONLY) = 3
open("/proc/meminfo", O_RDONLY|O_CLOEXEC) = 3
open("/usr/lib64/gconv/gconv-modules.cache", O_RDONLY) = 3
open("/etc/profile", O_RDONLY)          = 3
open("/etc/profile.d/", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/colorls.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/cvs.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/ge.sh", O_RDONLY)  = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/glib2.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/lang.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/less.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/modules.sh", O_RDONLY) = 3
open("/usr/share/Modules/init/bash", O_RDONLY) = 3
open("/usr/share/Modules/init/bash_completion", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/qt.sh", O_RDONLY)  = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/set-bmc-url.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/shef-login.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/udisks-bash-completion.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/vim.sh", O_RDONLY) = 3
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/usr/share/locale/locale.alias", O_RDONLY) = 3
open("/usr/share/locale/en_GB.UTF-8/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en_GB.utf8/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en_GB/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en.UTF-8/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en.utf8/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en/LC_MESSAGES/bash.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/dev/null", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
open("/etc/profile.d/which2.sh", O_RDONLY) = 3
open("/home/md1xdrj/.bash_profile", O_RDONLY) = 3
open("/home/md1xdrj/.bashrc", O_RDONLY) = 3
open("/etc/bashrc", O_RDONLY)           = 3
open("/etc/profile.d/modules.sh", O_RDONLY) = 3
open("/usr/share/Modules/init/bash", O_RDONLY) = 3
open("/usr/share/Modules/init/bash_completion", O_RDONLY) = 3
SCRIPT GOT HERE
+++ exited with 0 +++
</pre>


<p><code>strace</code> runs a command and <em>traces</em> the <em>system calls</em>
(so I suppose <code>strace</code> is short for <strong>S</strong>ystem <strong>Trace</strong>).
I'm running the command line <code>bash -l -c 'echo SCRIPT GOT HERE'</code> under <code>strace</code>.
<code>bash -l</code> is a <em>login</em> shell, so it should source my <code>.profile</code>.</p>
<p>First thing to notice about running things with <code>strace</code> is that you get lots of output.
And that's after I've used two options to reduce the ammount of output.
The <code>-e open</code> option to <code>strace</code> restricts it so that it only shows <code>open()</code> system calls;
normally it will show all system calls, which is <em>way</em> more output.
The <code>-e signal=</code> option to <code>strace</code> means that it won't show any signals, without it you see all signals.
Most programs don't see many signals,
but in this case there are a fair number of child process management signals
that are not particularly interesting.</p>
<p>The first few files are related to C runtimes and dynamic linking (<code>/etc/ld.so.cache</code>, <code>/lib64/libc.so.6</code>, and so on).
Then we get <code>/etc/profile</code>. Aha!
<code>bash</code> is reading the system wide profile file.
Which it turns out causes it to reading the bag of little profile scripts kept in <code>/etc/profile.d/</code> (most of which are specific to the Sheffield HPC).</p>
<p>(I've no idea what the obsession with opening <code>/dev/null</code> in between every script is by the way; some crazy <code>bash</code> thing. whatever)</p>
<p>Then, eventually, near the bottom, we see bash opening <code>/home/md1xdrj/.bash_profile</code>.
And this is the culprit.
I'm like "wait, WAT!?", "I have a <code>.bash_profile</code>?"</p>
<p>It turns out that, yes, I do have a <code>.bash_profile</code>.
I wasn't expecting that (it wasn't created by me).
A quick perusal of <code>man bash</code>[*1] reveals that
if <code>~/.bash_profile</code> exists then it will be sourced and <code>.profile</code> will not.</p>
<p>So I remove my <code>~/.bash_profile</code> and life is good again.</p>
<h3>Reflection</h3>
<p><code>strace</code> is a great tool and well worth exploring a little bit
(fun fact: you can attach to already running processes with <code>strace -p</code>).
So in this case I could've read the manual and inspected the file system to see what files <code>bash</code> would source,
but <code>strace</code> is more direct.
The manual might be out of date, misunderstood, or just plain wrong.
But <code>strace</code> cannot lie, it shows me what system calls a tool is actually making.</p>
<p>The Truth.</p>
<p>Of course The Truth that <code>strace</code> provides is really just <em>a</em> truth.
There is a whole world of complexity that <code>strace</code> hides from us.
Most obviously, we don't get to see all the instructions
that get executed in between the system calls.
We probably don't want to.
<code>strace</code> is serving up an abstraction, and that's a useful Truth
to deal with.</p>
<h3>Fanzine!</h3>
<p>If you liked this, then you should check out this <a href="http://jvns.ca/blog/2015/04/14/strace-zine/">strace
fanzine</a>.
I cannot recommend it enough.
It's enthusiastic, witty, fun to read, and you will learn
something about <code>strace</code> and system calls (I did!).</p>
<h3>Footnotes</h3>
<ol>
<li>
<p>This is what I call "a joke". Everyone should read <code>man bash</code>, but it is like Joyce's Ulysses: better read the Cliffs Notes[*2].</p>
</li>
<li>
<p>There are no Cliffs Notes for <code>bash</code>.</p>
</li>
</ol>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="RSE_gpu_role_2016/" class="u-url">We're hiring - RSE Position on Massive Scale Complex Systems Simulation with Accelerated Computing</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/paul-richmond/">Paul Richmond</a>
            </span></p>
            <p class="dateline"><a href="RSE_gpu_role_2016/" rel="bookmark"><time class="published dt-published" datetime="2016-04-25T09:06:12Z" title="2016-04-25 09:06">2016-04-25 09:06</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>A new position is available as a Research Associate/Research Software Engineer in the area of complex systems modelling using emerging high performance parallel architectures.</p>
<p>This post can be configured in two different ways. Either as a 3 year Research Associate/Research Software Engineer only, or as a 5 year post working as a Research Associate/Research Software Engineer (60%) and a Research Software Consultant (40%). Candidate’s preference for either option will be discussed at the interview stage.</p>
<p>More details on <a class="reference external" href="https://jobs.shef.ac.uk/sap/bc/webdynpro/sap/hrrcf_a_posting_apply?PARAM=cG9zdF9pbnN0X2d1aWQ9NTcxNUQzNTRGNTJCNkM5OEUxMDAwMDAwQUMxRTg4NzgmY2FuZF90eXBlPUVYVA%3d%3d&amp;sap-client=400&amp;sap-language=EN&amp;sap-accessibility=X&amp;sap-ep-themeroot=%2fSAP%2fPUBLIC%2fBC%2fUR%2fuos#">The University of Sheffield job site</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="9_steps/" class="u-url">9 steps for quality research software</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                <a href="../authors/mike-croucher/">Mike Croucher</a>
            </span></p>
            <p class="dateline"><a href="9_steps/" rel="bookmark"><time class="published dt-published" datetime="2016-04-18T07:54:39Z" title="2016-04-18 07:54">2016-04-18 07:54</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>I attended the <a class="reference external" href="http://www.software.ac.uk/">Software Sustainability Institute's</a> <a class="reference external" href="http://www.software.ac.uk/cw16">Collaborations Workshop</a> last month. This annual workshop is one of the primary events in the Research Software Engineering calendar and I highly recommend going to one if you are involved in the development of research software in any way.</p>
<p>One of the things I worked on was a collaborative blog post called <a class="reference external" href="http://www.software.ac.uk/blog/2016-04-05-9-steps-quality-research-software">9 steps for quality research software</a>.  I also wrote an article about some of the work I do called <a class="reference external" href="http://www.walkingrandomly.com/?p=5997">The accident and emergency of Research Software Engineering.</a></p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-1.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:rse@sheffield.ac.uk">Mike Croucher and Paul Richmond</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
